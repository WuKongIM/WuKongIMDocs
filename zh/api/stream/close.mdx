---
title: "关闭流消息"
description: "关闭指定的流消息"
api: "POST /stream/close"
---

## 概述

关闭指定的流消息，结束流消息的传输。

## 请求体

<ParamField body="client_msg_no" type="string" required>
客户端消息编号，用于标识要关闭的流消息
</ParamField>

<ParamField body="stream_no" type="string" required>
流消息编号
</ParamField>

<RequestExample>
```bash cURL
curl -X POST "http://localhost:5001/stream/close" \
  -H "Content-Type: application/json" \
  -d '{
    "client_msg_no": "client_msg_123",
    "stream_no": "stream_456"
  }'
```

```javascript JavaScript
const response = await fetch('http://localhost:5001/stream/close', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    client_msg_no: 'client_msg_123',
    stream_no: 'stream_456'
  })
});

const data = await response.json();
console.log(data);
```

```python Python
import requests

data = {
    "client_msg_no": "client_msg_123",
    "stream_no": "stream_456"
}

response = requests.post('http://localhost:5001/stream/close', json=data)
result = response.json()
print(result)
```

```go Go
package main

import (
    "bytes"
    "encoding/json"
    "fmt"
    "net/http"
)

func main() {
    data := map[string]interface{}{
        "client_msg_no": "client_msg_123",
        "stream_no":     "stream_456",
    }
    
    jsonData, _ := json.Marshal(data)
    
    resp, err := http.Post(
        "http://localhost:5001/stream/close",
        "application/json",
        bytes.NewBuffer(jsonData),
    )
    if err != nil {
        panic(err)
    }
    defer resp.Body.Close()
    
    var result map[string]interface{}
    json.NewDecoder(resp.Body).Decode(&result)
    fmt.Printf("%+v\n", result)
}
```
</RequestExample>

<ResponseExample>
```json 成功响应
{
  "status": "success"
}
```
</ResponseExample>

## 响应字段

<ResponseField name="status" type="string" required>
操作状态，成功时返回 "success"
</ResponseField>

## 状态码

| 状态码 | 说明 |
|--------|------|
| 200 | 流消息关闭成功 |
| 400 | 请求参数错误 |
| 404 | 流消息不存在 |
| 500 | 服务器内部错误 |

## 使用场景

### 流消息传输完成
当流消息的所有数据传输完成后，调用此 API 关闭流。

### 异常终止
当流消息传输过程中出现异常时，可以主动关闭流。

### 资源清理
及时关闭不再需要的流消息，释放服务器资源。

## 最佳实践

1. **及时关闭**：流消息使用完成后及时关闭
2. **错误处理**：处理流不存在的情况
3. **状态跟踪**：跟踪流消息的状态变化
4. **资源管理**：避免流消息资源泄漏
